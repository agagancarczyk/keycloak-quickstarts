{"version":3,"file":"CreateRealmRole-ac322e29.js","sources":["../../src/realm-roles/CreateRealmRole.tsx"],"sourcesContent":["import type RoleRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/roleRepresentation\";\nimport { AlertVariant } from \"@patternfly/react-core\";\nimport { SubmitHandler, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useAlerts } from \"../components/alert/Alerts\";\nimport { AttributeForm } from \"../components/key-value-form/AttributeForm\";\nimport { RoleForm } from \"../components/role-form/RoleForm\";\nimport { useAdminClient } from \"../context/auth/AdminClient\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\nimport { toRealmRole } from \"./routes/RealmRole\";\nimport { toRealmRoles } from \"./routes/RealmRoles\";\n\nexport default function CreateRealmRole() {\n  const { t } = useTranslation(\"roles\");\n  const form = useForm<AttributeForm>({ mode: \"onChange\" });\n  const navigate = useNavigate();\n  const { adminClient } = useAdminClient();\n  const { realm } = useRealm();\n  const { addAlert, addError } = useAlerts();\n\n  const onSubmit: SubmitHandler<AttributeForm> = async (formValues) => {\n    const role: RoleRepresentation = {\n      ...formValues,\n      name: formValues.name?.trim(),\n      attributes: {},\n    };\n\n    try {\n      await adminClient.roles.create(role);\n\n      const createdRole = await adminClient.roles.findOneByName({\n        name: formValues.name!,\n      });\n\n      if (!createdRole) {\n        throw new Error(t(\"common:notFound\"));\n      }\n\n      addAlert(t(\"roleCreated\"), AlertVariant.success);\n      navigate(toRealmRole({ realm, id: createdRole.id!, tab: \"details\" }));\n    } catch (error) {\n      addError(\"roles:roleCreateError\", error);\n    }\n  };\n\n  return (\n    <RoleForm\n      form={form}\n      onSubmit={onSubmit}\n      cancelLink={toRealmRoles({ realm })}\n      role=\"manage-realm\"\n      editMode={false}\n    />\n  );\n}\n"],"names":["CreateRealmRole","t","useTranslation","form","useForm","navigate","useNavigate","adminClient","useAdminClient","realm","useRealm","addAlert","addError","useAlerts","onSubmit","formValues","role","createdRole","AlertVariant","toRealmRole","error","jsx","RoleForm","toRealmRoles"],"mappings":"+bAcA,SAAwBA,GAAkB,CACxC,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAe,OAAO,EAC9BC,EAAOC,EAAuB,CAAE,KAAM,UAAY,CAAA,EAClDC,EAAWC,IACX,CAAE,YAAAC,GAAgBC,IAClB,CAAE,MAAAC,GAAUC,IACZ,CAAE,SAAAC,EAAU,SAAAC,CAAS,EAAIC,EAAU,EAEnCC,EAAyC,MAAOC,GAAe,CACnE,MAAMC,EAA2B,CAC/B,GAAGD,EACH,KAAMA,EAAW,MAAM,KAAK,EAC5B,WAAY,CAAC,CAAA,EAGX,GAAA,CACI,MAAAR,EAAY,MAAM,OAAOS,CAAI,EAEnC,MAAMC,EAAc,MAAMV,EAAY,MAAM,cAAc,CACxD,KAAMQ,EAAW,IAAA,CAClB,EAED,GAAI,CAACE,EACH,MAAM,IAAI,MAAMhB,EAAE,iBAAiB,CAAC,EAGtCU,EAASV,EAAE,aAAa,EAAGiB,EAAa,OAAO,EACtCb,EAAAc,EAAY,CAAE,MAAAV,EAAO,GAAIQ,EAAY,GAAK,IAAK,SAAW,CAAA,CAAC,QAC7DG,GACPR,EAAS,wBAAyBQ,CAAK,CACzC,CAAA,EAIA,OAAAC,EAAA,IAACC,EAAA,CACC,KAAAnB,EACA,SAAAW,EACA,WAAYS,EAAa,CAAE,MAAAd,EAAO,EAClC,KAAK,eACL,SAAU,EAAA,CAAA,CAGhB"}