import{u as F,c as k,b as I,z as T,f as v,r as f,j as e,P as G,F as d,G as m,K as H,g as A,B as x,L as P,d9 as g}from"./index-a3421f29.js";import{F as D}from"./FormAccess-1cceaef6.js";import{K}from"./KeyValueInput-ce08b760.js";import{K as c}from"./KeycloakTextInput-e7f6e917.js";import{V as L}from"./ViewHeader-832ec56e.js";import{u as S,U as E}from"./UserProfileContext-1adc9dc8.js";import"./realm-settings-section-4ed993c7.js";import{T as O}from"./Text-564bf299.js";import{A as R}from"./Form-518a2cf2.js";import"./copy-icon-a4fe01af.js";import"./GridItem-d34dae2e.js";import"./minus-icon-16876c86.js";import"./minus-circle-icon-6f9a971c.js";import"./ActionListItem-ab1a4322.js";import"./plus-circle-icon-cb854796.js";import"./EmptyStateBody-7b4fcee1.js";import"./ToolbarContent-7b435752.js";function U(t){return Object.entries(t).reduce((s,[n,o])=>typeof o=="string"?[...s,{key:n,value:o}]:[...s],[])}function V(t){return Object.fromEntries(t.filter(s=>s.key.length>0).map(s=>[s.key,s.value]))}const j={annotations:[{key:"",value:""}],displayDescription:"",displayHeader:"",name:""};function q(){const{t}=F(),{realm:s}=k(),{config:n,save:o}=S(),h=I(),y=T(),i=v({defaultValues:j}),r=f.useMemo(()=>n?.groups?.find(({name:a})=>a===y.name),[n?.groups]);f.useEffect(()=>{if(!r)return;const a=r.annotations?U(r.annotations):[];i.reset({...j,...r,annotations:a})},[r]);const b=async a=>{if(!n)return;const l=[...n.groups??[]],p=r?l.indexOf(r):-1,u={...a,annotations:V(a.annotations)};p===-1?l.push(u):l[p]=u,await o({...n,groups:l})&&h(g({realm:s,tab:"attributes-group"}))};return e.jsxs(e.Fragment,{children:[e.jsx(L,{titleKey:r?"realm-settings:editGroupText":"realm-settings:createGroupText",divider:!0}),e.jsx(G,{variant:"light",onSubmit:i.handleSubmit(b),children:e.jsxs(D,{isHorizontal:!0,role:"manage-realm",children:[e.jsxs(d,{label:t("realm-settings:nameField"),fieldId:"kc-name",isRequired:!0,helperTextInvalid:t("common:required"),validated:i.formState.errors.name?"error":"default",labelIcon:e.jsx(m,{helpText:t("realm-settings:nameHint"),fieldLabelId:"realm-settings:nameField"}),children:[e.jsx(c,{id:"kc-name",isReadOnly:!!r,...i.register("name",{required:!0})}),!!r&&e.jsx("input",{type:"hidden",...i.register("name")})]}),e.jsx(d,{label:t("realm-settings:displayHeaderField"),fieldId:"kc-display-header",labelIcon:e.jsx(m,{helpText:t("realm-settings:displayHeaderHint"),fieldLabelId:"realm-settings:displayHeaderField"}),children:e.jsx(c,{id:"kc-display-header",...i.register("displayHeader")})}),e.jsx(d,{label:t("realm-settings:displayDescriptionField"),fieldId:"kc-display-description",labelIcon:e.jsx(m,{helpText:t("realm-settings:displayDescriptionHint"),fieldLabelId:"realm-settings:displayDescriptionField"}),children:e.jsx(c,{id:"kc-display-description",...i.register("displayDescription")})}),e.jsx(H,{children:e.jsx(O,{component:"h2",children:t("realm-settings:annotationsText")})}),e.jsx(d,{label:t("realm-settings:annotationsText"),fieldId:"kc-annotations",children:e.jsx(A,{...i,children:e.jsx(K,{name:"annotations"})})}),e.jsxs(R,{children:[e.jsx(x,{variant:"primary",type:"submit",children:t("common:save")}),e.jsx(x,{variant:"link",component:a=>e.jsx(P,{...a,to:g({realm:s,tab:"attributes-group"})}),children:t("common:cancel")})]})]})})]})}const ie=()=>e.jsx(E,{children:e.jsx(q,{})});export{ie as default};
//# sourceMappingURL=AttributesGroupDetails-0ecffebe.js.map
