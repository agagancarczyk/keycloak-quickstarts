import{u as j,b as S,d as A,e as k,c as h,r as x,n as E,k as N,A as y,j as e,X as B,B as I,L as p,aZ as T,a8 as g,bt as v,G as w}from"./index-a3421f29.js";import{u as P}from"./ConfirmDialog-09ff7a12.js";import{L as V}from"./PaginatingTableToolbar-08ca9efb.js";import{K as G}from"./KeycloakDataTable-10a62d94.js";const $=({defaultRoleName:i,toDetail:m,messageBundle:r,...s})=>{const{t:l}=j(r),{realm:c}=h();return s.name!==i?e.jsx(p,{to:m(s.id),children:s.name}):e.jsxs(e.Fragment,{children:[e.jsxs(p,{to:v({realm:c,tab:"user-registration"}),children:[s.name," "]}),e.jsx(w,{helpText:l(`${r}:defaultRole`),fieldLabelId:"defaultRole"})]})},H=({loader:i,paginated:m=!0,parentRoleId:r,messageBundle:s="roles",toCreate:l,toDetail:c,isReadOnly:n})=>{const{t:o}=j(s),D=S(),{adminClient:d}=A(),{addAlert:f,addError:L}=k(),{realm:K}=h(),[u,C]=x.useState(),[a,R]=x.useState();E(()=>d.realms.findOne({realm:K}),t=>{C(t)},[]);const[b,F]=P({titleKey:"roles:roleDeleteConfirm",messageKey:o("roles:roleDeleteConfirmDialog",{selectedRoleName:a?a.name:""}),continueButtonLabel:"common:delete",continueButtonVariant:N.danger,onConfirm:async()=>{try{r?await d.roles.delCompositeRoles({id:r},[a]):await d.roles.delById({id:a.id}),R(void 0),f(o("roleDeletedSuccess"),y.success)}catch(t){L("roles:roleDeleteError",t)}}});return u?e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(G,{loader:i,ariaLabelKey:"roles:roleList",searchPlaceholderKey:"roles:searchFor",isPaginated:m,toolbarItem:!n&&e.jsx(I,{"data-testid":"create-role",component:t=>e.jsx(p,{...t,to:l}),children:o("createRole")}),actions:n?[]:[{title:o("common:delete"),onRowClick:t=>{R(t),t.name===u.defaultRole.name?f(o("defaultRoleDeleteError"),y.danger):b()}}],columns:[{name:"name",displayKey:"roles:roleName",cellRenderer:t=>e.jsx($,{...t,defaultRoleName:u.defaultRole?.name,toDetail:c,messageBundle:s})},{name:"composite",displayKey:"roles:composite",cellFormatters:[T(),g()]},{name:"description",displayKey:"common:description",cellFormatters:[g()]}],emptyState:e.jsx(V,{hasIcon:!0,message:o("noRoles"),instructions:n?"":o("noRolesInstructions"),primaryActionText:n?"":o("createRole"),onPrimaryAction:()=>D(l)})},a?a.id:"roleList")]}):e.jsx(B,{})};export{H as R};
//# sourceMappingURL=RolesList-1aa488b0.js.map
