import{u as I,f as K,c as P,ac as R,r as x,N as E,ad as r,q as B,j as e,F as o,G as l,V as a,C as i,S as T,B as k,L as D,ae as _}from"./index-a3421f29.js";import{g as w}from"./utils-49fe564a.js";import{b as S,d as z}from"./ClientScopeTypes-b557e5db.js";import{F as H}from"./FormAccess-1cceaef6.js";import{K as W}from"./KeycloakTextArea-1b518857.js";import{K as h}from"./KeycloakTextInput-e7f6e917.js";import{S as y,a as v,b as $}from"./Select-0f56a9cc.js";import{A as J}from"./Form-518a2cf2.js";const se=({clientScope:d,save:C})=>{const{t:n}=I("client-scopes"),{t:O}=I("clients"),{register:u,control:c,handleSubmit:L,setValue:V,formState:{errors:p,isDirty:F,isValid:q}}=K({mode:"onChange"}),{realm:A}=P(),f=R(),[N,b]=x.useState(!1),[G,g]=x.useState(!1),j=E({control:c,name:r("attributes.display.on.consent.screen"),defaultValue:d?.attributes?.["display.on.consent.screen"]??"true"});return x.useEffect(()=>{B(d??{},V)},[d]),e.jsxs(H,{role:"manage-clients",onSubmit:L(C),isHorizontal:!0,children:[e.jsx(o,{label:n("common:name"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:name"),fieldLabelId:"name"}),fieldId:"kc-name",validated:p.name?a.error:a.default,helperTextInvalid:n("common:required"),isRequired:!0,children:e.jsx(h,{id:"kc-name",validated:p.name?a.error:a.default,isRequired:!0,...u("name",{required:!0})})}),e.jsx(o,{label:n("common:description"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:description"),fieldLabelId:"description"}),fieldId:"kc-description",validated:p.description?a.error:a.default,helperTextInvalid:n("common:maxLength",{length:255}),children:e.jsx(h,{id:"kc-description",validated:p.description?a.error:a.default,...u("description",{maxLength:255})})}),e.jsx(o,{label:n("type"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:type"),fieldLabelId:"client-scopes:type"}),fieldId:"kc-type",children:e.jsx(i,{name:"type",defaultValue:S[0],control:c,render:({field:s})=>e.jsx(y,{toggleId:"kc-type",variant:v.single,isOpen:G,selections:s.value,onToggle:g,onSelect:(t,m)=>{s.onChange(m),g(!1)},children:z(n,S)})})}),!d&&e.jsx(o,{label:n("protocol"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:protocol"),fieldLabelId:"client-scopes:protocol"}),fieldId:"kc-protocol",children:e.jsx(i,{name:"protocol",defaultValue:f[0],control:c,render:({field:s})=>e.jsx(y,{toggleId:"kc-protocol",onToggle:b,onSelect:(t,m)=>{s.onChange(m),b(!1)},selections:s.value,variant:v.single,isOpen:N,children:f.map(t=>e.jsx($,{selected:t===s.value,value:t,"data-testid":`option-${t}`,children:w(O,t)},t))})})}),e.jsx(o,{hasNoPaddingTop:!0,label:n("displayOnConsentScreen"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:displayOnConsentScreen"),fieldLabelId:"client-scopes:displayOnConsentScreen"}),fieldId:"kc-display-on-consent-screen",children:e.jsx(i,{name:r("attributes.display.on.consent.screen"),control:c,defaultValue:j,render:({field:s})=>e.jsx(T,{id:"kc-display-on-consent-screen",label:n("common:on"),labelOff:n("common:off"),isChecked:s.value==="true",onChange:t=>s.onChange(t.toString())})})}),j==="true"&&e.jsx(o,{label:n("consentScreenText"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:consentScreenText"),fieldLabelId:"client-scopes:consentScreenText"}),fieldId:"kc-consent-screen-text",children:e.jsx(W,{id:"kc-consent-screen-text",...u(r("attributes.consent.screen.text"))})}),e.jsx(o,{hasNoPaddingTop:!0,label:n("includeInTokenScope"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:includeInTokenScope"),fieldLabelId:"client-scopes:includeInTokenScope"}),fieldId:"kc-include-in-token-scope",children:e.jsx(i,{name:r("attributes.include.in.token.scope"),control:c,defaultValue:"true",render:({field:s})=>e.jsx(T,{id:"kc-include-in-token-scope",label:n("common:on"),labelOff:n("common:off"),isChecked:s.value==="true",onChange:t=>s.onChange(t.toString())})})}),e.jsx(o,{label:n("guiOrder"),labelIcon:e.jsx(l,{helpText:n("client-scopes-help:guiOrder"),fieldLabelId:"client-scopes:guiOrder"}),fieldId:"kc-gui-order",children:e.jsx(i,{name:r("attributes.gui.order"),defaultValue:"",control:c,render:({field:s})=>e.jsx(h,{id:"kc-gui-order",type:"number",value:s.value,min:0,onChange:s.onChange})})}),e.jsxs(J,{children:[e.jsx(k,{variant:"primary",type:"submit",isDisabled:!F||!q,children:n("common:save")}),e.jsx(k,{variant:"link",component:s=>e.jsx(D,{...s,to:_({realm:A})}),children:n("common:cancel")})]})]})};export{se as S};
//# sourceMappingURL=ScopeForm-a772d0f4.js.map
