import{u as j,j as e,a4 as f,A as v,F as r,f as I,d as y,c as S,e as V,b as F,r as N,al as d,P as L,G as p,C as x,B as h,L as D}from"./index-a3421f29.js";import{b as E,F as G}from"./FormAccess-1cceaef6.js";import{V as M}from"./ViewHeader-832ec56e.js";import{T as w}from"./TimeSelector-a2bc30e2.js";import{M as H,a as P}from"./Modal-21c37af7.js";import{F as R,A as B}from"./Form-518a2cf2.js";import{N as K}from"./NumberInput-85f36a0d.js";import"./copy-icon-a4fe01af.js";import"./GridItem-d34dae2e.js";import"./Text-564bf299.js";import"./ToolbarContent-7b435752.js";import"./Select-0f56a9cc.js";import"./check-fc57dbe1.js";import"./star-icon-6a7e7d25.js";import"./minus-icon-16876c86.js";import"./plus-icon-2a767bad.js";const O=({token:a,toggleDialog:s})=>{const{t:n}=j("clients");return e.jsxs(H,{title:n("initialAccessTokenDetails"),isOpen:!0,onClose:s,variant:P.medium,children:[e.jsx(f,{title:n("copyInitialAccessToken"),titleHeadingLevel:"h2",isInline:!0,variant:v.warning}),e.jsx(R,{className:"pf-u-mt-md",children:e.jsx(r,{label:n("initialAccessToken"),fieldId:"initialAccessToken",children:e.jsx(E,{id:"initialAccessToken",isReadOnly:!0,children:a})})})]})};function se(){const{t:a}=j("clients"),{handleSubmit:s,control:n,formState:{isValid:b,errors:l}}=I({mode:"onChange"}),{adminClient:g}=y(),{realm:o}=S(),{addAlert:k,addError:A}=V(),C=F(),[c,m]=N.useState(""),T=async t=>{try{const i=await g.realms.createClientsInitialAccess({realm:o},t);m(i.token)}catch(i){A("clients:tokenSaveError",i)}};return e.jsxs(e.Fragment,{children:[c&&e.jsx(O,{token:c,toggleDialog:()=>{m(""),k(a("tokenSaveSuccess"),v.success),C(d({realm:o,tab:"initial-access-token"}))}}),e.jsx(M,{titleKey:"clients:createToken",subKey:"clients-help:createToken"}),e.jsx(L,{variant:"light",children:e.jsxs(G,{isHorizontal:!0,role:"create-client",onSubmit:s(T),children:[e.jsx(r,{label:a("expiration"),fieldId:"expiration",labelIcon:e.jsx(p,{helpText:a("clients-help:expiration"),fieldLabelId:"clients:expiration"}),helperTextInvalid:a("expirationValueNotValid"),validated:l.expiration?"error":"default",children:e.jsx(x,{name:"expiration",defaultValue:86400,control:n,rules:{min:1},render:({field:t})=>e.jsx(w,{"data-testid":"expiration",value:t.value,onChange:t.onChange,min:1,validated:l.expiration?"error":"default"})})}),e.jsx(r,{label:a("count"),fieldId:"count",labelIcon:e.jsx(p,{helpText:a("clients-help:count"),fieldLabelId:"clients:count"}),children:e.jsx(x,{name:"count",defaultValue:1,control:n,render:({field:t})=>e.jsx(K,{"data-testid":"count",inputName:"count",inputAriaLabel:a("count"),min:1,value:t.value,onPlus:()=>t.onChange(t.value+1),onMinus:()=>t.onChange(t.value-1),onChange:i=>{const u=Number(i.target.value);t.onChange(u<1?1:u)}})})}),e.jsxs(B,{children:[e.jsx(h,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!b,children:a("common:save")}),e.jsx(h,{"data-testid":"cancel",variant:"link",component:t=>e.jsx(D,{...t,to:d({realm:o,tab:"initial-access-token"})}),children:a("common:cancel")})]})]})})]})}export{se as default};
//# sourceMappingURL=CreateInitialAccessToken-646c1b19.js.map
