import{bf as z,bg as A,bh as X,bi as q,bj as V,bk as $,bl as H,u as E,R as K,r as j,j as e,P as u,bm as J,c as S,bn as Q,aU as W,T as D,X as Y,K as Z,bo as O,as as ee,G,E as p}from"./index-a3421f29.js";import{u as se}from"./useLocaleSort-3efc7c31.js";import{R as re,u as ae}from"./RoutableTabs-7f56b0c5.js";import{T as ie}from"./TableToolbar-ee0c86ef.js";import{X as ne,R as w,S as te,O as g,U as C,T as N,P as v}from"./Td-6d4ab209.js";import{E as oe}from"./ExpandableSection-15721cb7.js";import{E as le,a as de}from"./EmptyStateBody-7b4fcee1.js";import{a as R,b as _}from"./Tabs-5beaba80.js";import{G as ce,a as M}from"./GridItem-d34dae2e.js";import{C as k}from"./Card-aa3ba03c.js";import{C as I}from"./CardTitle-9175b04a.js";import{C as y}from"./CardBody-519f6395.js";import{D as L,a as T,b as c,c as h}from"./DescriptionListTerm-adda5202.js";import{L as P,a as U,b as B}from"./ListItem-499ec6f9.js";import{T as he}from"./Text-564bf299.js";import"./ToolbarContent-7b435752.js";import"./Form-518a2cf2.js";import"./star-icon-6a7e7d25.js";import"./check-fc57dbe1.js";import"./grip-vertical-icon-cbeff50f.js";import"./Checkbox-d00621d8.js";import"./plus-icon-2a767bad.js";import"./MenuList-e3786b59.js";function me(s,i){var a=[];return z(s,function(d,o,l){i(d,o,l)&&a.push(d)}),a}function xe(s,i){var a=A(s)?X:me;return a(s,q(i))}var pe=V(function(s){return $(H(s,1,ne,!0))});const je=pe,ue=()=>{const{t:s}=E("dashboard"),i=K(),[a,d]=j.useState(""),[o,l]=j.useState([]),x=j.useMemo(()=>Object.entries(i.providers||[]).filter(([n])=>n.includes(a)),[a]),F=n=>{o.includes(n)?l(o.filter(m=>m!==n)):l([...o,n])};return e.jsx(u,{variant:"light",children:e.jsx(ie,{inputGroupName:"search",inputGroupPlaceholder:s("common:search"),inputGroupOnEnter:d,children:e.jsxs(w,{variant:"compact",children:[e.jsx(te,{children:e.jsxs(g,{children:[e.jsx(C,{width:20,children:s("spi")}),e.jsx(C,{children:s("providers")})]})}),e.jsx(N,{children:x.map(([n,{providers:m}])=>e.jsxs(g,{children:[e.jsx(v,{children:n}),e.jsxs(v,{children:[e.jsx("ul",{children:Object.entries(m).map(([t])=>e.jsx("li",{children:t},t))}),Object.entries(m).map(([t,{operationalInfo:b}])=>b?e.jsx(oe,{isExpanded:o.includes(t),onToggle:()=>F(t),toggleText:o.includes(t)?s("showLess"):s("showMore"),children:e.jsx(w,{borders:!1,children:e.jsx(N,{children:Object.entries(b).map(([f,r])=>e.jsxs(g,{children:[e.jsx(v,{children:f}),e.jsx(v,{children:r})]},f))})})},t):null).filter(J)]})]},n))})]})})})};const be=()=>{const{t:s}=E("dashboard"),{realm:i}=S();return e.jsx(u,{variant:"light",children:e.jsxs(le,{variant:"large",children:[e.jsx(Q,{src:W.resourceUrl+"/icon.svg",alt:"Keycloak icon",className:"keycloak__dashboard_icon"}),e.jsx(D,{headingLevel:"h2",size:"3xl",children:s("welcome")}),e.jsx(D,{headingLevel:"h1",size:"4xl",children:i}),e.jsx(de,{children:s("introduction")})]})})},fe=()=>{const{t:s}=E("dashboard"),{realm:i}=S(),a=K(),d=se(),o=r=>n.includes(r),l=r=>a.profileInfo?.experimentalFeatures?.includes(r),x=r=>a.profileInfo?.previewFeatures?.includes(r),F=r=>!l(r)&&!x(r),n=j.useMemo(()=>d(a.profileInfo?.disabledFeatures??[],r=>r),[a.profileInfo]),m=j.useMemo(()=>d(xe(je(a.profileInfo?.experimentalFeatures,a.profileInfo?.previewFeatures),r=>!o(r)),r=>r),[a.profileInfo]),t=r=>ae(O({realm:i,tab:r})),b=t("info"),f=t("providers");return Object.keys(a).length===0?e.jsx(Y,{}):e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"light",children:e.jsx(Z,{className:"pf-u-mr-sm",children:e.jsx(he,{component:"h1",children:s("realmName",{name:i})})})}),e.jsx(u,{variant:"light",className:"pf-u-p-0",children:e.jsxs(re,{"data-testid":"dashboard-tabs",defaultLocation:O({realm:i,tab:"info"}),isBox:!0,mountOnEnter:!0,children:[e.jsx(R,{id:"info","data-testid":"infoTab",title:e.jsx(_,{children:s("serverInfo")}),...b,children:e.jsx(u,{variant:"light",children:e.jsxs(ce,{hasGutter:!0,children:[e.jsx(M,{lg:2,sm:12,children:e.jsxs(k,{className:"keycloak__dashboard_card",children:[e.jsx(I,{children:s("serverInfo")}),e.jsx(y,{children:e.jsx(L,{children:e.jsxs(T,{children:[e.jsx(c,{children:s("version")}),e.jsx(h,{children:a.systemInfo?.version}),e.jsx(c,{children:s("product")}),e.jsx(h,{children:ee(a.profileInfo?.name)})]})})}),e.jsx(I,{children:s("memory")}),e.jsx(y,{children:e.jsx(L,{children:e.jsxs(T,{children:[e.jsx(c,{children:s("totalMemory")}),e.jsx(h,{children:a.memoryInfo?.totalFormated}),e.jsx(c,{children:s("freeMemory")}),e.jsx(h,{children:a.memoryInfo?.freeFormated}),e.jsx(c,{children:s("usedMemory")}),e.jsx(h,{children:a.memoryInfo?.usedFormated})]})})})]})}),e.jsx(M,{lg:10,sm:12,children:e.jsxs(k,{className:"keycloak__dashboard_card",children:[e.jsx(I,{children:s("profile")}),e.jsx(y,{children:e.jsxs(L,{children:[e.jsxs(T,{children:[e.jsxs(c,{children:[s("enabledFeatures")," ",e.jsx(G,{fieldLabelId:"dashboard:enabledFeatures",helpText:s("dashboard:infoEnabledFeatures")})]}),e.jsx(h,{children:e.jsx(P,{variant:U.inline,children:m.map(r=>e.jsxs(B,{className:"pf-u-mb-sm",children:[r," ",l(r)?e.jsx(p,{color:"orange",children:s("experimental")}):null,x(r)?e.jsx(p,{color:"blue",children:s("preview")}):null]},r))})})]}),e.jsxs(T,{children:[e.jsxs(c,{children:[s("disabledFeatures")," ",e.jsx(G,{fieldLabelId:"dashboard:disabledFeatures",helpText:s("dashboard:infoDisabledFeatures")})]}),e.jsx(h,{children:e.jsx(P,{variant:U.inline,children:n.map(r=>e.jsxs(B,{className:"pf-u-mb-sm",children:[r," ",l(r)?e.jsx(p,{color:"orange",children:s("experimental")}):null,x(r)?e.jsx(p,{color:"blue",children:s("preview")}):null,F(r)?e.jsx(p,{color:"green",children:s("supported")}):null]},r))})})]})]})})]})})]})})}),e.jsx(R,{id:"providers","data-testid":"providersTab",title:e.jsx(_,{children:s("providerInfo")}),...f,children:e.jsx(ue,{})})]})})]})};function ze(){const{realm:s}=S(),i=s==="master";return e.jsxs(e.Fragment,{children:[!i&&e.jsx(be,{}),i&&e.jsx(fe,{})]})}export{ze as default};
//# sourceMappingURL=Dashboard-721e5e27.js.map
