import{u as v,r as m,j as e,a as U,N as f,F as h,V as s,G as j,C as k,R as M,ar as F,z as q}from"./index-a3421f29.js";import{K as w}from"./KeycloakTextArea-1b518857.js";import{K as A}from"./KeycloakTextInput-e7f6e917.js";import{T as g,S,F as O}from"./discovery-settings-095f2617.js";import{E}from"./ExpandableSection-15721cb7.js";import{S as I,a as y,b as x}from"./Select-0f56a9cc.js";import{C as K}from"./ClientIdSecret-f71639f8.js";import{R as z,D}from"./DisplayOrder-43d5f15a.js";const R=["plain","S256"],T=({readOnly:t})=>{const{t:i}=v("identity-providers"),[l,n]=m.useState(!1),{register:o,control:c,formState:{errors:u}}=U(),p=f({control:c,name:"config.validateSignature"}),b=f({control:c,name:"config.useJwksUrl"}),r=f({control:c,name:"config.pkceEnabled"});return e.jsxs("div",{className:"pf-c-form pf-m-horizontal",children:[e.jsx(h,{label:i("authorizationUrl"),fieldId:"kc-authorization-url",isRequired:!0,validated:u.config?.authorizationUrl?s.error:s.default,helperTextInvalid:i("common:required"),children:e.jsx(A,{type:"url","data-testid":"authorizationUrl",id:"kc-authorization-url",validated:u.config?.authorizationUrl?s.error:s.default,isReadOnly:t,...o("config.authorizationUrl",{required:!0})})}),e.jsx(h,{label:i("tokenUrl"),fieldId:"tokenUrl",isRequired:!0,validated:u.config?.tokenUrl?s.error:s.default,helperTextInvalid:i("common:required"),children:e.jsx(A,{type:"url",id:"tokenUrl","data-testid":"tokenUrl",validated:u.config?.tokenUrl?s.error:s.default,isReadOnly:t,...o("config.tokenUrl",{required:!0})})}),e.jsx(g,{field:"config.logoutUrl",label:"logoutUrl",isReadOnly:t}),e.jsx(g,{field:"config.userInfoUrl",label:"userInfoUrl",isReadOnly:t}),e.jsx(g,{field:"config.issuer",label:"issuer",isReadOnly:t}),e.jsx(S,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),p==="true"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{field:"config.useJwksUrl",label:"useJwksUrl","data-testid":"useJwksUrl",isReadOnly:t}),b==="true"?e.jsx(g,{field:"config.jwksUrl",label:"jwksUrl",isReadOnly:t}):e.jsxs(e.Fragment,{children:[e.jsx(O,{label:"validatingPublicKey",children:e.jsx(w,{"data-testid":"validatingPublicKey",...o("config.publicKeySignatureVerifier")})}),e.jsx(g,{field:"config.publicKeySignatureVerifierKeyId",label:"validatingPublicKeyId",isReadOnly:t})]})]}),e.jsx(S,{field:"config.pkceEnabled",label:"pkceEnabled",isReadOnly:t}),r==="true"&&e.jsx(h,{className:"pf-u-pb-3xl",label:i("pkceMethod"),labelIcon:e.jsx(j,{helpText:i("identity-providers-help:pkceMethod"),fieldLabelId:"identity-providers:pkceMethod"}),fieldId:"pkceMethod",children:e.jsx(k,{name:"config.pkceMethod",defaultValue:R[0],control:c,render:({field:a})=>e.jsx(I,{toggleId:"pkceMethod",required:!0,direction:"down",onToggle:()=>n(!l),onSelect:(d,C)=>{a.onChange(C),n(!1)},selections:i(`${a.value}`),variant:y.single,"aria-label":i("pkceMethod"),isOpen:l,children:R.map(d=>e.jsx(x,{selected:d===a.value,value:d,children:i(`${d}`)},d))})})})]})},W=({readOnly:t})=>{const{t:i}=v("identity-providers"),[l,n]=m.useState(!1);return e.jsxs(e.Fragment,{children:[t&&e.jsx(E,{className:"keycloak__discovery-settings__metadata",toggleText:i(l?"hideMetaData":"showMetaData"),onToggle:()=>n(!l),isExpanded:l,children:e.jsx(T,{readOnly:t})}),!t&&e.jsx(T,{readOnly:t})]})},_=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"],B=({create:t=!0})=>{const i=M().providers.clientSignature.providers,{t:l}=v("identity-providers"),{control:n}=U(),[o,c]=m.useState(!1),[u,p]=m.useState(!1),b=f({control:n,name:"config.clientAuthMethod"});return e.jsxs(e.Fragment,{children:[e.jsx(h,{label:l("clientAuthentication"),labelIcon:e.jsx(j,{helpText:l("identity-providers-help:clientAuthentication"),fieldLabelId:"identity-providers:clientAuthentication"}),fieldId:"clientAuthentication",children:e.jsx(k,{name:"config.clientAuthMethod",defaultValue:_[0],control:n,render:({field:r})=>e.jsx(I,{toggleId:"clientAuthentication",required:!0,onToggle:()=>c(!o),onSelect:(a,d)=>{r.onChange(d),c(!1)},selections:r.value,variant:y.single,"aria-label":l("clientAuthentication"),isOpen:o,children:_.map(a=>e.jsx(x,{selected:a===r.value,value:a,children:l(`clientAuthentications.${a}`)},a))})})}),e.jsx(K,{secretRequired:b!=="private_key_jwt",create:t}),e.jsx(h,{label:l("clientAssertionSigningAlg"),labelIcon:e.jsx(j,{helpText:l("identity-providers-help:clientAssertionSigningAlg"),fieldLabelId:"identity-providers:clientAssertionSigningAlg"}),fieldId:"clientAssertionSigningAlg",children:e.jsx(k,{name:"config.clientAssertionSigningAlg",defaultValue:"",control:n,render:({field:r})=>e.jsx(I,{maxHeight:200,toggleId:"clientAssertionSigningAlg",onToggle:()=>p(!u),onSelect:(a,d)=>{r.onChange(d.toString()),p(!1)},selections:r.value||l("algorithmNotSpecified"),variant:y.single,isOpen:u,children:[e.jsx(x,{selected:r.value==="",value:"",children:l("algorithmNotSpecified")},""),...F(i).map(a=>e.jsx(x,{selected:a===r.value,value:a},a))]})})})]})},Q=({id:t})=>{const{t:i}=v("identity-providers"),{tab:l}=q(),{register:n,formState:{errors:o}}=U();return e.jsxs(e.Fragment,{children:[e.jsx(z,{id:t}),e.jsx(h,{label:i("alias"),labelIcon:e.jsx(j,{helpText:i("identity-providers-help:alias"),fieldLabelId:"identity-providers:alias"}),fieldId:"alias",isRequired:!0,validated:o.alias?s.error:s.default,helperTextInvalid:i("common:required"),children:e.jsx(A,{isReadOnly:l==="settings",isRequired:!0,id:"alias","data-testid":"alias",validated:o.alias?s.error:s.default,...n("alias",{required:!0})})}),e.jsx(g,{field:"displayName",label:"displayName"}),e.jsx(D,{})]})};export{W as D,Q as O,B as a};
//# sourceMappingURL=OIDCGeneralSettings-a93cb3b6.js.map
