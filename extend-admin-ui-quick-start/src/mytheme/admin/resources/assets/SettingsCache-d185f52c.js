import{u as D,z as H,b as P,d as k,e as N,c as M,a as O,k as w,A as K,da as $,j as e,C as m,w as z,T as W,K as q,N as U,F as p,G as f}from"./index-a3421f29.js";import{u as _}from"./ConfirmDialog-09ff7a12.js";import{V as S}from"./ViewHeader-832ec56e.js";import{F as R}from"./FormAccess-1cceaef6.js";import{T as Y}from"./Text-564bf299.js";import{u as I}from"./useToggle-a9cb2c55.js";import{i as b}from"./isEqual-69fbe00f.js";import{S as T,a as E,b as a}from"./Select-0f56a9cc.js";import{N as B}from"./NumberInput-85f36a0d.js";const oe=({provider:i,save:t,noDivider:s=!1,dropdownItems:c=[]})=>{const{t:l}=D("user-federation"),{id:r}=H(),L=P(),{adminClient:v}=k(),{addAlert:F,addError:j}=N(),{realm:d}=M(),{control:y,setValue:x}=O(),[C,g]=_({titleKey:"user-federation:userFedDisableConfirmTitle",messageKey:"user-federation:userFedDisableConfirm",continueButtonLabel:"common:disable",onConfirm:()=>{x("config.enabled[0]","false"),t()}}),[n,u]=_({titleKey:"user-federation:userFedDeleteConfirmTitle",messageKey:"user-federation:userFedDeleteConfirm",continueButtonLabel:"common:delete",continueButtonVariant:w.danger,onConfirm:async()=>{try{await v.components.del({id:r}),F(l("userFedDeletedSuccess"),K.success),L($({realm:d}),{replace:!0})}catch(o){j("user-federation:userFedDeleteError",o)}}});return e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx(u,{}),e.jsx(m,{name:"config.enabled[0]",defaultValue:["true"][0],control:y,render:({field:o})=>r?e.jsx(S,{divider:!s,titleKey:i,dropdownItems:[...c,e.jsx(z,{onClick:()=>n(),"data-testid":"delete-cmd",children:l("deleteProvider")},"delete")],isEnabled:o.value==="true",onToggle:h=>{h?(o.onChange(h.toString()),t()):C()}}):e.jsx(S,{titleKey:l("addProvider",{provider:i,count:1})})})]})};const G=({title:i,description:t,showDescription:s=!1})=>e.jsxs(e.Fragment,{children:[e.jsx(W,{size:"xl",headingLevel:"h2",className:s?"kc-wizard-section-header__title--has-description":"kc-wizard-section-header__title",children:i}),s&&e.jsx(q,{className:"kc-wizard-section-header__description",children:e.jsx(Y,{children:t})})]}),A=({form:i})=>{const{t}=D("user-federation"),[s,c]=I(),[l,r]=I(),[L,v]=I(),[F,j]=I(),d=U({control:i.control,name:"config.cachePolicy"}),y=[e.jsx(a,{value:["0"],isPlaceholder:!0,children:["00"]},0)];let x="";for(let n=1;n<24;n++)n<10?x=`0${n}`:x=`${n}`,y.push(e.jsx(a,{value:[`${n}`],children:x},n));const C=[e.jsx(a,{value:["0"],isPlaceholder:!0,children:["00"]},0)];let g="";for(let n=1;n<60;n++)n<10?g=`0${n}`:g=`${n}`,C.push(e.jsx(a,{value:[`${n}`],children:g},n));return e.jsxs(e.Fragment,{children:[e.jsx(p,{label:t("cachePolicy"),labelIcon:e.jsx(f,{helpText:t("user-federation-help:cachePolicyHelp"),fieldLabelId:"user-federation:cachePolicy"}),fieldId:"kc-cache-policy",children:e.jsx(m,{name:"config.cachePolicy",defaultValue:["DEFAULT"],control:i.control,render:({field:n})=>e.jsxs(T,{toggleId:"kc-cache-policy",required:!0,onToggle:c,isOpen:s,onSelect:(u,o)=>{n.onChange(o),c()},selections:n.value,variant:E.single,"data-testid":"kerberos-cache-policy",children:[e.jsx(a,{value:["DEFAULT"],isPlaceholder:!0},0),e.jsx(a,{value:["EVICT_DAILY"]},1),e.jsx(a,{value:["EVICT_WEEKLY"]},2),e.jsx(a,{value:["MAX_LIFESPAN"]},3),e.jsx(a,{value:["NO_CACHE"]},4)]})})}),b(d,["EVICT_WEEKLY"])?e.jsx(p,{label:t("evictionDay"),labelIcon:e.jsx(f,{helpText:t("user-federation-help:evictionDayHelp"),fieldLabelId:"user-federation:evictionDay"}),isRequired:!0,fieldId:"kc-eviction-day",children:e.jsx(m,{name:"config.evictionDay[0]",defaultValue:"1",control:i.control,render:({field:n})=>e.jsxs(T,{"data-testid":"cache-day",toggleId:"kc-eviction-day",required:!0,onToggle:j,isOpen:F,onSelect:(u,o)=>{n.onChange(o),j()},selections:n.value,variant:E.single,children:[e.jsx(a,{value:"1",isPlaceholder:!0,children:t("common:Sunday")},0),e.jsx(a,{value:"2",children:t("common:Monday")},1),e.jsx(a,{value:"3",children:t("common:Tuesday")},2),e.jsx(a,{value:"4",children:t("common:Wednesday")},3),e.jsx(a,{value:"5",children:t("common:Thursday")},4),e.jsx(a,{value:"6",children:t("common:Friday")},5),e.jsx(a,{value:"7",children:t("common:Saturday")},6)]})})}):null,b(d,["EVICT_DAILY"])||b(d,["EVICT_WEEKLY"])?e.jsxs(e.Fragment,{children:[e.jsx(p,{label:t("evictionHour"),labelIcon:e.jsx(f,{helpText:t("user-federation-help:evictionHourHelp"),fieldLabelId:"user-federation:evictionHour"}),isRequired:!0,fieldId:"kc-eviction-hour",children:e.jsx(m,{name:"config.evictionHour",defaultValue:["0"],control:i.control,render:({field:n})=>e.jsx(T,{toggleId:"kc-eviction-hour",onToggle:r,isOpen:l,onSelect:(u,o)=>{n.onChange(o),r()},selections:n.value,variant:E.single,children:y})})}),e.jsx(p,{label:t("evictionMinute"),labelIcon:e.jsx(f,{helpText:t("user-federation-help:evictionMinuteHelp"),fieldLabelId:"user-federation:evictionMinute"}),isRequired:!0,fieldId:"kc-eviction-minute",children:e.jsx(m,{name:"config.evictionMinute",defaultValue:["0"],control:i.control,render:({field:n})=>e.jsx(T,{toggleId:"kc-eviction-minute",onToggle:v,isOpen:L,onSelect:(u,o)=>{n.onChange(o),v()},selections:n.value,variant:E.single,children:C})})})]}):null,b(d,["MAX_LIFESPAN"])?e.jsx(p,{label:t("maxLifespan"),labelIcon:e.jsx(f,{helpText:t("user-federation-help:maxLifespanHelp"),fieldLabelId:"user-federation:maxLifespan"}),fieldId:"kc-max-lifespan",children:e.jsx(m,{name:"config.maxLifespan[0]",defaultValue:0,control:i.control,render:({field:n})=>{const o=h=>n.onChange(Math.max(h,0));return e.jsx(B,{id:"kc-max-lifespan","data-testid":"kerberos-cache-lifespan",value:n.value,min:0,unit:t("ms"),type:"text",onPlus:()=>n.onChange(Number(n.value)+1),onMinus:()=>n.onChange(Number(n.value)-1),onChange:h=>{const V=Number(h.currentTarget.value);o(isNaN(V)?0:V)}})}})}):null]})},se=({form:i,showSectionHeading:t=!1,showSectionDescription:s=!1,unWrap:c=!1})=>{const{t:l}=D("user-federation"),{t:r}=D("user-federation-help");return e.jsxs(e.Fragment,{children:[t&&e.jsx(G,{title:l("cacheSettings"),description:r("cacheSettingsDescription"),showDescription:s}),c?e.jsx(A,{form:i}):e.jsx(R,{role:"manage-realm",isHorizontal:!0,children:e.jsx(A,{form:i})})]})};export{oe as H,se as S,G as W};
//# sourceMappingURL=SettingsCache-d185f52c.js.map
