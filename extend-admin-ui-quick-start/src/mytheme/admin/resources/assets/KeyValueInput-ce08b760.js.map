{"version":3,"file":"KeyValueInput-ce08b760.js","sources":["../../../../node_modules/@patternfly/react-styles/css/components/HelperText/helper-text.mjs","../../../../node_modules/@patternfly/react-core/dist/esm/components/HelperText/HelperText.js","../../../../node_modules/@patternfly/react-core/dist/esm/components/HelperText/HelperTextItem.js","../../src/components/key-value-form/KeyValueInput.tsx"],"sourcesContent":["import './helper-text.css';\nexport default {\n  \"helperText\": \"pf-c-helper-text\",\n  \"helperTextItem\": \"pf-c-helper-text__item\",\n  \"helperTextItemIcon\": \"pf-c-helper-text__item-icon\",\n  \"helperTextItemText\": \"pf-c-helper-text__item-text\",\n  \"modifiers\": {\n    \"indeterminate\": \"pf-m-indeterminate\",\n    \"warning\": \"pf-m-warning\",\n    \"success\": \"pf-m-success\",\n    \"error\": \"pf-m-error\",\n    \"dynamic\": \"pf-m-dynamic\"\n  },\n  \"themeDark\": \"pf-theme-dark\"\n};","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/HelperText/helper-text';\nimport { css } from '@patternfly/react-styles';\nexport const HelperText = (_a) => {\n    var { children, className, component = 'div', id, isLiveRegion = false } = _a, props = __rest(_a, [\"children\", \"className\", \"component\", \"id\", \"isLiveRegion\"]);\n    const Component = component;\n    return (React.createElement(Component, Object.assign({ id: id, className: css(styles.helperText, className) }, (isLiveRegion && { 'aria-live': 'polite' }), props), children));\n};\nHelperText.displayName = 'HelperText';\n//# sourceMappingURL=HelperText.js.map","import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/HelperText/helper-text';\nimport { css } from '@patternfly/react-styles';\nimport MinusIcon from '@patternfly/react-icons/dist/esm/icons/minus-icon';\nimport ExclamationTriangleIcon from '@patternfly/react-icons/dist/esm/icons/exclamation-triangle-icon';\nimport CheckCircleIcon from '@patternfly/react-icons/dist/esm/icons/check-circle-icon';\nimport ExclamationCircleIcon from '@patternfly/react-icons/dist/esm/icons/exclamation-circle-icon';\nconst variantStyle = {\n    default: '',\n    indeterminate: styles.modifiers.indeterminate,\n    warning: styles.modifiers.warning,\n    success: styles.modifiers.success,\n    error: styles.modifiers.error\n};\nexport const HelperTextItem = (_a) => {\n    var { children, className, component = 'div', variant = 'default', icon, isDynamic = false, hasIcon = isDynamic, id, screenReaderText = `${variant} status` } = _a, props = __rest(_a, [\"children\", \"className\", \"component\", \"variant\", \"icon\", \"isDynamic\", \"hasIcon\", \"id\", \"screenReaderText\"]);\n    const Component = component;\n    return (React.createElement(Component, Object.assign({ className: css(styles.helperTextItem, variantStyle[variant], isDynamic && styles.modifiers.dynamic, className), id: id }, props),\n        icon && (React.createElement(\"span\", { className: css(styles.helperTextItemIcon), \"aria-hidden\": true }, icon)),\n        hasIcon && !icon && (React.createElement(\"span\", { className: css(styles.helperTextItemIcon), \"aria-hidden\": true },\n            (variant === 'default' || variant === 'indeterminate') && React.createElement(MinusIcon, null),\n            variant === 'warning' && React.createElement(ExclamationTriangleIcon, null),\n            variant === 'success' && React.createElement(CheckCircleIcon, null),\n            variant === 'error' && React.createElement(ExclamationCircleIcon, null))),\n        React.createElement(\"span\", { className: css(styles.helperTextItemText) },\n            children,\n            isDynamic && React.createElement(\"span\", { className: \"pf-u-screen-reader\" },\n                \": \",\n                screenReaderText,\n                \";\"))));\n};\nHelperTextItem.displayName = 'HelperTextItem';\n//# sourceMappingURL=HelperTextItem.js.map","import {\n  ActionList,\n  ActionListItem,\n  Button,\n  EmptyState,\n  EmptyStateBody,\n  Grid,\n  GridItem,\n  HelperText,\n  HelperTextItem,\n  InputGroup,\n} from \"@patternfly/react-core\";\nimport { MinusCircleIcon, PlusCircleIcon } from \"@patternfly/react-icons\";\nimport { Fragment } from \"react\";\nimport { useFieldArray, useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { KeycloakTextInput } from \"../keycloak-text-input/KeycloakTextInput\";\n\ntype KeyValueInputProps = {\n  name: string;\n};\n\nexport const KeyValueInput = ({ name }: KeyValueInputProps) => {\n  const { t } = useTranslation(\"common\");\n  const {\n    control,\n    register,\n    formState: { errors },\n  } = useFormContext();\n\n  const { fields, append, remove } = useFieldArray({\n    control,\n    name,\n  });\n\n  const appendNew = () => append({ key: \"\", value: \"\" });\n\n  return fields.length > 0 ? (\n    <>\n      <Grid hasGutter>\n        <GridItem className=\"pf-c-form__label\" span={6}>\n          <span className=\"pf-c-form__label-text\">{t(\"key\")}</span>\n        </GridItem>\n        <GridItem className=\"pf-c-form__label\" span={6}>\n          <span className=\"pf-c-form__label-text\">{t(\"value\")}</span>\n        </GridItem>\n        {fields.map((attribute, index) => {\n          const keyError = !!(errors as any)[name]?.[index]?.key;\n          const valueError = !!(errors as any)[name]?.[index]?.value;\n\n          return (\n            <Fragment key={attribute.id}>\n              <GridItem span={6}>\n                <KeycloakTextInput\n                  placeholder={t(\"keyPlaceholder\")}\n                  aria-label={t(\"key\")}\n                  data-testid={`${name}-key`}\n                  {...register(`${name}.${index}.key`, { required: true })}\n                  validated={keyError ? \"error\" : \"default\"}\n                  isRequired\n                />\n                {keyError && (\n                  <HelperText>\n                    <HelperTextItem variant=\"error\">\n                      {t(\"keyError\")}\n                    </HelperTextItem>\n                  </HelperText>\n                )}\n              </GridItem>\n              <GridItem span={6}>\n                <InputGroup>\n                  <KeycloakTextInput\n                    placeholder={t(\"valuePlaceholder\")}\n                    aria-label={t(\"value\")}\n                    data-testid={`${name}-value`}\n                    {...register(`${name}.${index}.value`, { required: true })}\n                    validated={valueError ? \"error\" : \"default\"}\n                    isRequired\n                  />\n                  <Button\n                    variant=\"link\"\n                    title={t(\"removeAttribute\")}\n                    onClick={() => remove(index)}\n                    data-testid={`${name}-remove`}\n                  >\n                    <MinusCircleIcon />\n                  </Button>\n                </InputGroup>\n                {valueError && (\n                  <HelperText>\n                    <HelperTextItem variant=\"error\">\n                      {t(\"valueError\")}\n                    </HelperTextItem>\n                  </HelperText>\n                )}\n              </GridItem>\n            </Fragment>\n          );\n        })}\n      </Grid>\n      <ActionList>\n        <ActionListItem>\n          <Button\n            data-testid={`${name}-add-row`}\n            className=\"pf-u-px-0 pf-u-mt-sm\"\n            variant=\"link\"\n            icon={<PlusCircleIcon />}\n            onClick={appendNew}\n          >\n            {t(\"addAttribute\")}\n          </Button>\n        </ActionListItem>\n      </ActionList>\n    </>\n  ) : (\n    <EmptyState\n      data-testid={`${name}-empty-state`}\n      className=\"pf-u-p-0\"\n      variant=\"xs\"\n    >\n      <EmptyStateBody>{t(\"missingAttributes\")}</EmptyStateBody>\n      <Button\n        data-testid={`${name}-add-row`}\n        variant=\"link\"\n        icon={<PlusCircleIcon />}\n        isSmall\n        onClick={appendNew}\n      >\n        {t(\"addAttribute\")}\n      </Button>\n    </EmptyState>\n  );\n};\n"],"names":["styles","HelperText","_a","children","className","component","id","isLiveRegion","props","__rest","Component","React.createElement","css","variantStyle","HelperTextItem","variant","icon","isDynamic","hasIcon","screenReaderText","MinusIcon","ExclamationTriangleIcon","CheckCircleIcon","ExclamationCircleIcon","KeyValueInput","name","useTranslation","control","register","errors","useFormContext","fields","append","remove","useFieldArray","appendNew","jsxs","Fragment","Grid","jsx","GridItem","attribute","index","keyError","valueError","KeycloakTextInput","InputGroup","Button","MinusCircleIcon","ActionList","ActionListItem","PlusCircleIcon","EmptyState","EmptyStateBody"],"mappings":"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","x_google_ignoreList":[0,1,2]}