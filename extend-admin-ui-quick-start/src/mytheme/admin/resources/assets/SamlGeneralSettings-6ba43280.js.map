{"version":3,"file":"SamlGeneralSettings-6ba43280.js","sources":["../../src/identity-providers/add/DescriptorSettings.tsx","../../src/identity-providers/add/SamlGeneralSettings.tsx"],"sourcesContent":["import IdentityProviderRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/identityProviderRepresentation\";\nimport {\n  ExpandableSection,\n  FormGroup,\n  NumberInput,\n  Select,\n  SelectOption,\n  SelectVariant,\n  ValidatedOptions,\n} from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport { Controller, useFormContext, useWatch } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { HelpItem } from \"ui-shared\";\nimport { KeycloakTextArea } from \"../../components/keycloak-text-area/KeycloakTextArea\";\nimport { KeycloakTextInput } from \"../../components/keycloak-text-input/KeycloakTextInput\";\nimport { FormGroupField } from \"../component/FormGroupField\";\nimport { SwitchField } from \"../component/SwitchField\";\n\nimport \"./discovery-settings.css\";\n\ntype DescriptorSettingsProps = {\n  readOnly: boolean;\n};\n\nconst Fields = ({ readOnly }: DescriptorSettingsProps) => {\n  const { t } = useTranslation(\"identity-providers\");\n  const { t: th } = useTranslation(\"identity-providers-help\");\n\n  const {\n    register,\n    control,\n    formState: { errors },\n  } = useFormContext<IdentityProviderRepresentation>();\n  const [namedPolicyDropdownOpen, setNamedPolicyDropdownOpen] = useState(false);\n  const [principalTypeDropdownOpen, setPrincipalTypeDropdownOpen] =\n    useState(false);\n  const [signatureAlgorithmDropdownOpen, setSignatureAlgorithmDropdownOpen] =\n    useState(false);\n  const [encryptionAlgorithmDropdownOpen, setEncryptionAlgorithmDropdownOpen] =\n    useState(false);\n  const [\n    samlSignatureKeyNameDropdownOpen,\n    setSamlSignatureKeyNameDropdownOpen,\n  ] = useState(false);\n\n  const wantAuthnSigned = useWatch({\n    control,\n    name: \"config.wantAuthnRequestsSigned\",\n  });\n\n  const validateSignature = useWatch({\n    control,\n    name: \"config.validateSignature\",\n  });\n\n  const principalType = useWatch({\n    control,\n    name: \"config.principalType\",\n  });\n\n  return (\n    <div className=\"pf-c-form pf-m-horizontal\">\n      <FormGroup\n        label={t(\"serviceProviderEntityId\")}\n        fieldId=\"kc-saml-service-provider-entity-id\"\n        labelIcon={\n          <HelpItem\n            helpText={t(\"identity-providers-help:serviceProviderEntityId\")}\n            fieldLabelId=\"identity-providers:serviceProviderEntityId\"\n          />\n        }\n      >\n        <KeycloakTextInput\n          data-testid=\"serviceProviderEntityId\"\n          id=\"kc-saml-service-provider-entity-id\"\n          {...register(\"config.entityId\")}\n        />\n      </FormGroup>\n      <FormGroup\n        label={t(\"identityProviderEntityId\")}\n        fieldId=\"kc-identity-provider-entity-id\"\n        labelIcon={\n          <HelpItem\n            helpText={t(\"identity-providers-help:identityProviderEntityId\")}\n            fieldLabelId=\"identity-providers:identityProviderEntityId\"\n          />\n        }\n      >\n        <KeycloakTextInput\n          data-testid=\"identityProviderEntityId\"\n          id=\"kc-identity-provider-entity-id\"\n          {...register(\"config.idpEntityId\")}\n        />\n      </FormGroup>\n      <FormGroup\n        label={t(\"ssoServiceUrl\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"ssoServiceUrl\")}\n            fieldLabelId=\"identity-providers:ssoServiceUrl\"\n          />\n        }\n        fieldId=\"kc-sso-service-url\"\n        isRequired\n        validated={\n          errors.config?.singleSignOnServiceUrl\n            ? ValidatedOptions.error\n            : ValidatedOptions.default\n        }\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <KeycloakTextInput\n          type=\"url\"\n          data-testid=\"sso-service-url\"\n          id=\"kc-sso-service-url\"\n          validated={\n            errors.config?.singleSignOnServiceUrl\n              ? ValidatedOptions.error\n              : ValidatedOptions.default\n          }\n          isReadOnly={readOnly}\n          {...register(\"config.singleSignOnServiceUrl\", { required: true })}\n        />\n      </FormGroup>\n      <FormGroup\n        label={t(\"singleLogoutServiceUrl\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"singleLogoutServiceUrl\")}\n            fieldLabelId=\"identity-providers:singleLogoutServiceUrl\"\n          />\n        }\n        fieldId=\"single-logout-service-url\"\n        data-testid=\"single-logout-service-url\"\n        validated={\n          errors.config?.singleLogoutServiceUrl\n            ? ValidatedOptions.error\n            : ValidatedOptions.default\n        }\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <KeycloakTextInput\n          type=\"url\"\n          id=\"single-logout-service-url\"\n          isReadOnly={readOnly}\n          {...register(\"config.singleLogoutServiceUrl\")}\n        />\n      </FormGroup>\n      <SwitchField\n        field=\"config.backchannelSupported\"\n        label=\"backchannelLogout\"\n        data-testid=\"backchannelLogout\"\n        isReadOnly={readOnly}\n      />\n      <FormGroup\n        label={t(\"nameIdPolicyFormat\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"nameIdPolicyFormat\")}\n            fieldLabelId=\"identity-providers:nameIdPolicyFormat\"\n          />\n        }\n        fieldId=\"kc-nameIdPolicyFormat\"\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <Controller\n          name=\"config.nameIDPolicyFormat\"\n          defaultValue={\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\"}\n          control={control}\n          render={({ field }) => (\n            <Select\n              toggleId=\"kc-nameIdPolicyFormat\"\n              onToggle={(isExpanded) => setNamedPolicyDropdownOpen(isExpanded)}\n              isOpen={namedPolicyDropdownOpen}\n              onSelect={(_, value) => {\n                field.onChange(value as string);\n                setNamedPolicyDropdownOpen(false);\n              }}\n              selections={field.value}\n              variant={SelectVariant.single}\n              isDisabled={readOnly}\n            >\n              <SelectOption\n                data-testid=\"persistent-option\"\n                value={\"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent\"}\n                isPlaceholder\n              >\n                {t(\"persistent\")}\n              </SelectOption>\n              <SelectOption\n                data-testid=\"transient-option\"\n                value=\"urn:oasis:names:tc:SAML:2.0:nameid-format:transient\"\n              >\n                {t(\"transient\")}\n              </SelectOption>\n              <SelectOption\n                data-testid=\"email-option\"\n                value=\"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress\"\n              >\n                {t(\"email\")}\n              </SelectOption>\n              <SelectOption\n                data-testid=\"kerberos-option\"\n                value=\"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos\"\n              >\n                {t(\"kerberos\")}\n              </SelectOption>\n\n              <SelectOption\n                data-testid=\"x509-option\"\n                value=\"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName\"\n              >\n                {t(\"x509\")}\n              </SelectOption>\n\n              <SelectOption\n                data-testid=\"windowsDomainQN-option\"\n                value=\"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName\"\n              >\n                {t(\"windowsDomainQN\")}\n              </SelectOption>\n\n              <SelectOption\n                data-testid=\"unspecified-option\"\n                value={\"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\"}\n              >\n                {t(\"unspecified\")}\n              </SelectOption>\n            </Select>\n          )}\n        ></Controller>\n      </FormGroup>\n\n      <FormGroup\n        label={t(\"principalType\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"principalType\")}\n            fieldLabelId=\"identity-providers:principalType\"\n          />\n        }\n        fieldId=\"kc-principalType\"\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <Controller\n          name=\"config.principalType\"\n          defaultValue={t(\"subjectNameId\")}\n          control={control}\n          render={({ field }) => (\n            <Select\n              toggleId=\"kc-principalType\"\n              onToggle={(isExpanded) =>\n                setPrincipalTypeDropdownOpen(isExpanded)\n              }\n              isOpen={principalTypeDropdownOpen}\n              onSelect={(_, value) => {\n                field.onChange(value.toString());\n                setPrincipalTypeDropdownOpen(false);\n              }}\n              selections={field.value}\n              variant={SelectVariant.single}\n              isDisabled={readOnly}\n            >\n              <SelectOption\n                data-testid=\"subjectNameId-option\"\n                value=\"SUBJECT\"\n                isPlaceholder\n              >\n                {t(\"subjectNameId\")}\n              </SelectOption>\n              <SelectOption\n                data-testid=\"attributeName-option\"\n                value=\"ATTRIBUTE\"\n              >\n                {t(\"attributeName\")}\n              </SelectOption>\n              <SelectOption\n                data-testid=\"attributeFriendlyName-option\"\n                value=\"FRIENDLY_ATTRIBUTE\"\n              >\n                {t(\"attributeFriendlyName\")}\n              </SelectOption>\n            </Select>\n          )}\n        ></Controller>\n      </FormGroup>\n\n      {principalType?.includes(\"ATTRIBUTE\") && (\n        <FormGroup\n          label={t(\"principalAttribute\")}\n          labelIcon={\n            <HelpItem\n              helpText={th(\"principalAttribute\")}\n              fieldLabelId=\"identity-providers:principalAttribute\"\n            />\n          }\n          fieldId=\"principalAttribute\"\n        >\n          <KeycloakTextInput\n            id=\"principalAttribute\"\n            data-testid=\"principalAttribute\"\n            isReadOnly={readOnly}\n            {...register(\"config.principalAttribute\")}\n          />\n        </FormGroup>\n      )}\n      <SwitchField\n        field=\"config.allowCreate\"\n        label=\"allowCreate\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.postBindingResponse\"\n        label=\"httpPostBindingResponse\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.postBindingAuthnRequest\"\n        label=\"httpPostBindingAuthnRequest\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.postBindingLogout\"\n        label=\"httpPostBindingLogout\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.wantAuthnRequestsSigned\"\n        label=\"wantAuthnRequestsSigned\"\n        isReadOnly={readOnly}\n      />\n\n      {wantAuthnSigned === \"true\" && (\n        <>\n          <FormGroup\n            label={t(\"signatureAlgorithm\")}\n            labelIcon={\n              <HelpItem\n                helpText={th(\"signatureAlgorithm\")}\n                fieldLabelId=\"identity-providers:signatureAlgorithm\"\n              />\n            }\n            fieldId=\"kc-signatureAlgorithm\"\n          >\n            <Controller\n              name=\"config.signatureAlgorithm\"\n              defaultValue=\"RSA_SHA256\"\n              control={control}\n              render={({ field }) => (\n                <Select\n                  toggleId=\"kc-signatureAlgorithm\"\n                  onToggle={(isExpanded) =>\n                    setSignatureAlgorithmDropdownOpen(isExpanded)\n                  }\n                  isOpen={signatureAlgorithmDropdownOpen}\n                  onSelect={(_, value) => {\n                    field.onChange(value.toString());\n                    setSignatureAlgorithmDropdownOpen(false);\n                  }}\n                  selections={field.value}\n                  variant={SelectVariant.single}\n                  isDisabled={readOnly}\n                >\n                  <SelectOption value=\"RSA_SHA1\" />\n                  <SelectOption value=\"RSA_SHA256\" isPlaceholder />\n                  <SelectOption value=\"RSA_SHA256_MGF1\" />\n                  <SelectOption value=\"RSA_SHA512\" />\n                  <SelectOption value=\"RSA_SHA512_MGF1\" />\n                  <SelectOption value=\"DSA_SHA1\" />\n                </Select>\n              )}\n            ></Controller>\n          </FormGroup>\n          <FormGroup\n            label={t(\"encryptionAlgorithm\")}\n            labelIcon={\n              <HelpItem\n                helpText={th(\"encryptionAlgorithm\")}\n                fieldLabelId=\"identity-provider:encryptionAlgorithm\"\n              />\n            }\n            fieldId=\"kc-encryptionAlgorithm\"\n          >\n            <Controller\n              name=\"config.encryptionAlgorithm\"\n              defaultValue=\"RSA-OAEP\"\n              control={control}\n              render={({ field }) => (\n                <Select\n                  toggleId=\"kc-encryptionAlgorithm\"\n                  onToggle={(isExpanded) =>\n                    setEncryptionAlgorithmDropdownOpen(isExpanded)\n                  }\n                  isOpen={encryptionAlgorithmDropdownOpen}\n                  onSelect={(_, value) => {\n                    field.onChange(value.toString());\n                    setEncryptionAlgorithmDropdownOpen(false);\n                  }}\n                  selections={field.value}\n                  variant={SelectVariant.single}\n                  isDisabled={readOnly}\n                >\n                  <SelectOption value=\"RSA-OAEP\" />\n                  <SelectOption value=\"RSA1_5\" />\n                </Select>\n              )}\n            ></Controller>\n          </FormGroup>\n          <FormGroup\n            label={t(\"samlSignatureKeyName\")}\n            labelIcon={\n              <HelpItem\n                helpText={th(\"samlSignatureKeyName\")}\n                fieldLabelId=\"identity-providers:samlSignatureKeyName\"\n              />\n            }\n            fieldId=\"kc-samlSignatureKeyName\"\n          >\n            <Controller\n              name=\"config.xmlSigKeyInfoKeyNameTransformer\"\n              defaultValue={t(\"keyID\")}\n              control={control}\n              render={({ field }) => (\n                <Select\n                  toggleId=\"kc-samlSignatureKeyName\"\n                  onToggle={(isExpanded) =>\n                    setSamlSignatureKeyNameDropdownOpen(isExpanded)\n                  }\n                  isOpen={samlSignatureKeyNameDropdownOpen}\n                  onSelect={(_, value) => {\n                    field.onChange(value.toString());\n                    setSamlSignatureKeyNameDropdownOpen(false);\n                  }}\n                  selections={field.value}\n                  variant={SelectVariant.single}\n                  isDisabled={readOnly}\n                >\n                  <SelectOption value=\"NONE\" />\n                  <SelectOption value={t(\"keyID\")} isPlaceholder />\n                  <SelectOption value={t(\"certSubject\")} />\n                </Select>\n              )}\n            ></Controller>\n          </FormGroup>\n        </>\n      )}\n\n      <SwitchField\n        field=\"config.wantAssertionsSigned\"\n        label=\"wantAssertionsSigned\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.wantAssertionsEncrypted\"\n        label=\"wantAssertionsEncrypted\"\n        isReadOnly={readOnly}\n      />\n      <SwitchField\n        field=\"config.forceAuthn\"\n        label=\"forceAuthentication\"\n        isReadOnly={readOnly}\n      />\n\n      <SwitchField\n        field=\"config.validateSignature\"\n        label=\"validateSignature\"\n        isReadOnly={readOnly}\n      />\n      {validateSignature === \"true\" && (\n        <FormGroupField label=\"validatingX509Certs\">\n          <KeycloakTextArea\n            id=\"validatingX509Certs\"\n            data-testid=\"validatingX509Certs\"\n            isReadOnly={readOnly}\n            {...register(\"config.signingCertificate\")}\n          ></KeycloakTextArea>\n        </FormGroupField>\n      )}\n      <SwitchField\n        field=\"config.signSpMetadata\"\n        label=\"signServiceProviderMetadata\"\n        data-testid=\"signServiceProviderMetadata\"\n        isReadOnly={readOnly}\n      />\n      <SwitchField\n        field=\"config.loginHint\"\n        label=\"passSubject\"\n        data-testid=\"passSubject\"\n        isReadOnly={readOnly}\n      />\n\n      <FormGroup\n        label={t(\"allowedClockSkew\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"allowedClockSkew\")}\n            fieldLabelId=\"identity-providers:allowedClockSkew\"\n          />\n        }\n        fieldId=\"allowedClockSkew\"\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <Controller\n          name=\"config.allowedClockSkew\"\n          defaultValue={0}\n          control={control}\n          render={({ field }) => {\n            const v = Number(field.value);\n            return (\n              <NumberInput\n                data-testid=\"allowedClockSkew\"\n                inputName=\"allowedClockSkew\"\n                min={0}\n                max={2147483}\n                value={v}\n                readOnly\n                onPlus={() => field.onChange(v + 1)}\n                onMinus={() => field.onChange(v - 1)}\n                onChange={(event) => {\n                  const value = Number(\n                    (event.target as HTMLInputElement).value\n                  );\n                  field.onChange(value < 0 ? 0 : value);\n                }}\n              />\n            );\n          }}\n        />\n      </FormGroup>\n\n      <FormGroup\n        label={t(\"attributeConsumingServiceIndex\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"attributeConsumingServiceIndex\")}\n            fieldLabelId=\"identity-providers:attributeConsumingServiceIndex\"\n          />\n        }\n        fieldId=\"attributeConsumingServiceIndex\"\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <Controller\n          name=\"config.attributeConsumingServiceIndex\"\n          defaultValue={0}\n          control={control}\n          render={({ field }) => {\n            const v = Number(field.value);\n            return (\n              <NumberInput\n                data-testid=\"attributeConsumingServiceIndex\"\n                inputName=\"attributeConsumingServiceIndex\"\n                min={0}\n                max={2147483}\n                value={v}\n                readOnly\n                onPlus={() => field.onChange(v + 1)}\n                onMinus={() => field.onChange(v - 1)}\n                onChange={(event) => {\n                  const value = Number(\n                    (event.target as HTMLInputElement).value\n                  );\n                  field.onChange(value < 0 ? 0 : value);\n                }}\n              />\n            );\n          }}\n        />\n      </FormGroup>\n\n      <FormGroup\n        label={t(\"attributeConsumingServiceName\")}\n        labelIcon={\n          <HelpItem\n            helpText={th(\"attributeConsumingServiceName\")}\n            fieldLabelId=\"identity-providers:attributeConsumingServiceName\"\n          />\n        }\n        fieldId=\"attributeConsumingServiceName\"\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <KeycloakTextInput\n          id=\"attributeConsumingServiceName\"\n          data-testid=\"attributeConsumingServiceName\"\n          isReadOnly={readOnly}\n          {...register(\"config.attributeConsumingServiceName\")}\n        />\n      </FormGroup>\n    </div>\n  );\n};\n\nexport const DescriptorSettings = ({ readOnly }: DescriptorSettingsProps) => {\n  const { t } = useTranslation(\"identity-providers\");\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  return readOnly ? (\n    <ExpandableSection\n      className=\"keycloak__discovery-settings__metadata\"\n      toggleText={isExpanded ? t(\"hideMetaData\") : t(\"showMetaData\")}\n      onToggle={(isOpen) => setIsExpanded(isOpen)}\n      isExpanded={isExpanded}\n    >\n      <Fields readOnly={readOnly} />\n    </ExpandableSection>\n  ) : (\n    <Fields readOnly={readOnly} />\n  );\n};\n","import { FormGroup, ValidatedOptions } from \"@patternfly/react-core\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { FormattedLink } from \"../../components/external-link/FormattedLink\";\nimport { HelpItem } from \"ui-shared\";\nimport { KeycloakTextInput } from \"../../components/keycloak-text-input/KeycloakTextInput\";\nimport { useRealm } from \"../../context/realm-context/RealmContext\";\nimport environment from \"../../environment\";\nimport { DisplayOrder } from \"../component/DisplayOrder\";\nimport { RedirectUrl } from \"../component/RedirectUrl\";\nimport { TextField } from \"../component/TextField\";\n\nimport \"./saml-general-settings.css\";\n\ntype SamlGeneralSettingsProps = {\n  id: string;\n  isAliasReadonly?: boolean;\n};\n\nexport const SamlGeneralSettings = ({\n  id,\n  isAliasReadonly = false,\n}: SamlGeneralSettingsProps) => {\n  const { t } = useTranslation(\"identity-providers\");\n  const { realm } = useRealm();\n\n  const {\n    register,\n    watch,\n    formState: { errors },\n  } = useFormContext();\n\n  const alias = watch(\"alias\");\n\n  return (\n    <>\n      <RedirectUrl id={id} />\n\n      <FormGroup\n        label={t(\"alias\")}\n        labelIcon={\n          <HelpItem\n            helpText={t(\"identity-providers-help:alias\")}\n            fieldLabelId=\"identity-providers:alias\"\n          />\n        }\n        fieldId=\"alias\"\n        isRequired\n        validated={\n          errors.alias ? ValidatedOptions.error : ValidatedOptions.default\n        }\n        helperTextInvalid={t(\"common:required\")}\n      >\n        <KeycloakTextInput\n          isRequired\n          id=\"alias\"\n          data-testid=\"alias\"\n          isReadOnly={isAliasReadonly}\n          validated={\n            errors.alias ? ValidatedOptions.error : ValidatedOptions.default\n          }\n          {...register(\"alias\", { required: true })}\n        />\n      </FormGroup>\n\n      <TextField\n        field=\"displayName\"\n        label=\"displayName\"\n        data-testid=\"displayName\"\n      />\n      <DisplayOrder />\n      <FormGroup\n        label={t(\"endpoints\")}\n        fieldId=\"endpoints\"\n        labelIcon={\n          <HelpItem\n            helpText={t(\"identity-providers-help:alias\")}\n            fieldLabelId=\"identity-providers:alias\"\n          />\n        }\n        className=\"keycloak__identity-providers__saml_link\"\n      >\n        <FormattedLink\n          title={t(\"samlEndpointsLabel\")}\n          href={`${environment.authUrl}/realms/${realm}/broker/${alias}/endpoint/descriptor`}\n          isInline\n        />\n      </FormGroup>\n    </>\n  );\n};\n"],"names":["Fields","readOnly","t","useTranslation","th","register","control","errors","useFormContext","namedPolicyDropdownOpen","setNamedPolicyDropdownOpen","useState","principalTypeDropdownOpen","setPrincipalTypeDropdownOpen","signatureAlgorithmDropdownOpen","setSignatureAlgorithmDropdownOpen","encryptionAlgorithmDropdownOpen","setEncryptionAlgorithmDropdownOpen","samlSignatureKeyNameDropdownOpen","setSamlSignatureKeyNameDropdownOpen","wantAuthnSigned","useWatch","validateSignature","principalType","jsxs","jsx","FormGroup","HelpItem","KeycloakTextInput","ValidatedOptions","SwitchField","Controller","field","Select","isExpanded","_","value","SelectVariant","SelectOption","Fragment","FormGroupField","KeycloakTextArea","v","NumberInput","event","DescriptorSettings","setIsExpanded","ExpandableSection","isOpen","SamlGeneralSettings","id","isAliasReadonly","realm","useRealm","watch","alias","RedirectUrl","TextField","DisplayOrder","FormattedLink","environment"],"mappings":"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"}