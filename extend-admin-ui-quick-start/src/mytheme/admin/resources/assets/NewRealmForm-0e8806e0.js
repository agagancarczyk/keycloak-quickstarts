import{u as C,b as F,ca as w,db as k,d as A,e as y,r as S,f as E,j as e,P as I,F as o,C as T,S as V,B as m,q,s as K,bo as N}from"./index-a3421f29.js";import{F as O}from"./FormAccess-1cceaef6.js";import{J as z}from"./JsonFileUpload-a913d52f.js";import{K as B}from"./KeycloakTextInput-e7f6e917.js";import{V as G}from"./ViewHeader-832ec56e.js";import{A as H}from"./Form-518a2cf2.js";import"./copy-icon-a4fe01af.js";import"./GridItem-d34dae2e.js";import"./FileUploadForm-96efeae2.js";import"./FileUpload-ca37c1a6.js";import"./CodeEditor-2fb93648.js";import"./EmptyStateBody-7b4fcee1.js";import"./EmptyStateSecondaryActions-08edafb5.js";import"./Modal-21c37af7.js";import"./Text-564bf299.js";import"./ToolbarContent-7b435752.js";function te(){const{t:a}=C("realm"),s=F(),{refresh:n,whoAmI:i}=w(),{refresh:c}=k(),{adminClient:d}=A(),{addAlert:u,addError:p}=y(),[h,f]=S.useState(),{register:x,handleSubmit:b,control:v,setValue:g,formState:{errors:l}}=E({mode:"onChange"}),j=r=>{const t={id:"",realm:"",enabled:!0};q(r||t,g),f(r||t)},R=async r=>{try{await d.realms.create({...h,...K(r)}),u(a("saveRealmSuccess")),n(),await c(),s(N({realm:r.realm}))}catch(t){p("realm:saveRealmError",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(G,{titleKey:"realm:createRealm",subKey:"realm:realmExplain"}),e.jsx(I,{variant:"light",children:e.jsxs(O,{isHorizontal:!0,onSubmit:b(R),role:"view-realm",isReadOnly:!i.canCreateRealm(),children:[e.jsx(z,{id:"kc-realm-filename",allowEditingUploadedText:!0,onChange:j}),e.jsx(o,{label:a("realmName"),isRequired:!0,fieldId:"kc-realm-name",validated:l.realm?"error":"default",helperTextInvalid:l.realm?.message,children:e.jsx(B,{isRequired:!0,id:"kc-realm-name",validated:l.realm?"error":"default",...x("realm",{required:{value:!0,message:a("common:required")},pattern:{value:/^[a-zA-Z0-9-_]+$/,message:a("invalidRealmName")}})})}),e.jsx(o,{label:a("enabled"),fieldId:"kc-realm-enabled-switch",children:e.jsx(T,{name:"enabled",defaultValue:!0,control:v,render:({field:r})=>e.jsx(V,{id:"kc-realm-enabled-switch",name:"enabled",label:a("common:on"),labelOff:a("common:off"),isChecked:r.value,onChange:r.onChange,"aria-label":a("enabled")})})}),e.jsxs(H,{children:[e.jsx(m,{variant:"primary",type:"submit",children:a("common:create")}),e.jsx(m,{variant:"link",onClick:()=>s(-1),children:a("common:cancel")})]})]})})]})}export{te as default};
//# sourceMappingURL=NewRealmForm-0e8806e0.js.map
