{"version":3,"file":"DeleteScopeDialog-976d398c.js","sources":["../../src/clients/authorization/DeleteScopeDialog.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\nimport { Alert, AlertVariant } from \"@patternfly/react-core\";\n\nimport type { PermissionScopeRepresentation } from \"./Scopes\";\nimport { useAlerts } from \"../../components/alert/Alerts\";\nimport { ConfirmDialogModal } from \"../../components/confirm-dialog/ConfirmDialog\";\nimport { useAdminClient } from \"../../context/auth/AdminClient\";\nimport type ScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/scopeRepresentation\";\n\ntype DeleteScopeDialogProps = {\n  clientId: string;\n  selectedScope:\n    | PermissionScopeRepresentation\n    | ScopeRepresentation\n    | undefined;\n  refresh: () => void;\n  open: boolean;\n  toggleDialog: () => void;\n};\n\nexport const DeleteScopeDialog = ({\n  clientId,\n  selectedScope,\n  refresh,\n  open,\n  toggleDialog,\n}: DeleteScopeDialogProps) => {\n  const { t } = useTranslation(\"clients\");\n  const { adminClient } = useAdminClient();\n  const { addAlert, addError } = useAlerts();\n\n  return (\n    <ConfirmDialogModal\n      open={open}\n      toggleDialog={toggleDialog}\n      titleKey=\"clients:deleteScope\"\n      continueButtonLabel=\"clients:confirm\"\n      onConfirm={async () => {\n        try {\n          await adminClient.clients.delAuthorizationScope({\n            id: clientId,\n            scopeId: selectedScope?.id!,\n          });\n          addAlert(t(\"resourceScopeSuccess\"), AlertVariant.success);\n          refresh();\n        } catch (error) {\n          addError(\"clients:resourceScopeError\", error);\n        }\n      }}\n    >\n      {t(\"deleteScopeConfirm\")}\n      {selectedScope &&\n        \"permissions\" in selectedScope &&\n        selectedScope.permissions &&\n        selectedScope.permissions.length > 0 && (\n          <Alert\n            variant=\"warning\"\n            isInline\n            isPlain\n            title={t(\"deleteScopeWarning\")}\n            className=\"pf-u-pt-lg\"\n          >\n            <p className=\"pf-u-pt-xs\">\n              {selectedScope.permissions.map((permission) => (\n                <strong key={permission.id} className=\"pf-u-pr-md\">\n                  {permission.name}\n                </strong>\n              ))}\n            </p>\n          </Alert>\n        )}\n    </ConfirmDialogModal>\n  );\n};\n"],"names":["DeleteScopeDialog","clientId","selectedScope","refresh","open","toggleDialog","t","useTranslation","adminClient","useAdminClient","addAlert","addError","useAlerts","jsxs","ConfirmDialogModal","AlertVariant","error","jsx","Alert","permission"],"mappings":"4HAoBO,MAAMA,EAAoB,CAAC,CAChC,SAAAC,EACA,cAAAC,EACA,QAAAC,EACA,KAAAC,EACA,aAAAC,CACF,IAA8B,CAC5B,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAe,SAAS,EAChC,CAAE,YAAAC,GAAgBC,IAClB,CAAE,SAAAC,EAAU,SAAAC,CAAS,EAAIC,EAAU,EAGvC,OAAAC,EAAA,KAACC,EAAA,CACC,KAAAV,EACA,aAAAC,EACA,SAAS,sBACT,oBAAoB,kBACpB,UAAW,SAAY,CACjB,GAAA,CACI,MAAAG,EAAY,QAAQ,sBAAsB,CAC9C,GAAIP,EACJ,QAASC,GAAe,EAAA,CACzB,EACDQ,EAASJ,EAAE,sBAAsB,EAAGS,EAAa,OAAO,EAChDZ,UACDa,GACPL,EAAS,6BAA8BK,CAAK,CAC9C,CACF,EAEC,SAAA,CAAAV,EAAE,oBAAoB,EACtBJ,GACC,gBAAiBA,GACjBA,EAAc,aACdA,EAAc,YAAY,OAAS,GACjCe,EAAA,IAACC,EAAA,CACC,QAAQ,UACR,SAAQ,GACR,QAAO,GACP,MAAOZ,EAAE,oBAAoB,EAC7B,UAAU,aAEV,eAAC,IAAE,CAAA,UAAU,aACV,SAAcJ,EAAA,YAAY,IAAKiB,GAC7BF,MAAA,SAAA,CAA2B,UAAU,aACnC,SAAAE,EAAW,MADDA,EAAW,EAExB,CACD,EACH,CAAA,CACF,CAAA,CAAA,CAAA,CAIV"}